<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hari ini hari apa ?</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Poppins, sans-serif;
        background: #f8f8ff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
      }
      #wrap {
        text-align: center;
      }
      h1 {
        font-size: 2rem;
        color: #333;
      }
      #btn {
        padding: 12px 24px;
        background: #ff4d6d;
        border: none;
        color: white;
        border-radius: 10px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: 0.2s;
        position: absolute;
        display: none;
      }
      #btn:hover {
        background: #ff3355;
      }
      #nameBox input {
        padding: 10px;
        font-size: 1rem;
        border-radius: 8px;
        border: 2px solid #ccc;
        width: 200px;
      }
      #start {
        margin-top: 10px;
        padding: 10px 20px;
        background: #4d79ff;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
      }
      #notif {
        margin-top: 20px;
        color: #444;
        font-size: 1.1rem;
        height: 24px;
      }
    </style>
  </head>
  <body>
    <div id="wrap">
      <h1>Hari ini hari yang beda</h1>

      <div id="nameBox">
        <input type="text" id="nama" placeholder="Masukkan nama" />
        <br />
        <button id="start">Mulai</button>
      </div>

      <p id="info" style="display: none"></p>

      <p id="notif"></p>

      <button id="btn">Pencet</button>
    </div>

    <script>
      const btn = document.getElementById('btn');
      const start = document.getElementById('start');
      const nama = document.getElementById('nama');
      const info = document.getElementById('info');
      const notif = document.getElementById('notif');

      let total = 0;
      let userName = '';
      let moving = false;

      // Medium speed
      const tempos = [500, 500, 380, 380, 500, 340, 340];
      let tempoIndex = 0;

      function randomPos() {
        const w = window.innerWidth - 150;
        const h = window.innerHeight - 80;

        const x = Math.random() * w;
        const y = Math.random() * h;

        btn.style.left = x + 'px';
        btn.style.top = y + 'px';
      }

      function evadeCursor(e) {
        if (moving) return;

        const rect = btn.getBoundingClientRect();
        const dx = e.clientX - (rect.left + rect.width / 2);
        const dy = e.clientY - (rect.top + rect.height / 2);
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < 85) {
          // medium lebih halus
          moving = true;

          const delay = tempos[tempoIndex];
          tempoIndex = (tempoIndex + 1) % tempos.length;

          setTimeout(() => {
            randomPos();
            moving = false;
          }, delay);
        }
      }

      start.addEventListener('click', () => {
        if (nama.value.trim() === '') {
          alert('Nama wajib diisi dulu.');
          return;
        }

        userName = nama.value.trim();
        document.getElementById('nameBox').style.display = 'none';
        info.style.display = 'block';
        btn.style.display = 'inline-block';

        randomPos();
      });

      btn.addEventListener('mousemove', evadeCursor);

      btn.addEventListener('click', () => {
        total++;

        if (total === 10) notif.textContent = 'Dikit lagi bisa.';
        if (total === 12) notif.textContent = 'Sedikit lagi.';
        if (total === 14) notif.textContent = 'Hampir sampai.';

        randomPos();

        if (total === 15) {
          const dirayakan = prompt('Masukkan nama yang mau dirayakan:');
          if (dirayakan && dirayakan.trim() !== '') {
            alert(`Yeyyy berhasil merayakan ultah ${dirayakan}! ðŸŽ‰`);
          } else {
            alert('Yeyyy berhasil merayakan ulang tahun! ðŸŽ‰');
          }

          setTimeout(() => {
            window.location.href = 'ultah.html';
          }, 500);
        }
      });
    </script>
  </body>
</html>
